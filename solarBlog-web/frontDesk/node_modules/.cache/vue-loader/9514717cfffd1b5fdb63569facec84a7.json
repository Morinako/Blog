{"remainingRequest":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\src\\components\\Reply.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\src\\components\\Reply.vue","mtime":1692914156000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\frontDesk\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBFbW9qaSBmcm9tICIuL0Vtb2ppIjsKaW1wb3J0IEVtb2ppTGlzdCBmcm9tICIuLi9hc3NldHMvanMvZW1vamkiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRW1vamkKICB9LAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5kZXg6IDAsCiAgICAgIGNob29zZUVtb2ppOiBmYWxzZSwKICAgICAgbmlja25hbWU6ICIiLAogICAgICByZXBseVVzZXJJZDogbnVsbCwKICAgICAgcGFyZW50SWQ6IG51bGwsCiAgICAgIGNvbW1lbnRDb250ZW50OiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbmNsZVJlcGx5KCkgewogICAgICB0aGlzLiRyZWZzLnJlcGx5LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICB9LAogICAgaW5zZXJ0UmVwbHkoKSB7CiAgICAgIC8v5Yik5pat55m75b2VCiAgICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUudXNlcklkKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9naW5GbGFnID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuY29tbWVudENvbnRlbnQudHJpbSgpID09PSAiIikgewogICAgICAgIHRoaXMuJHRvYXN0KHsgdHlwZTogImVycm9yIiwgbWVzc2FnZTogIuWbnuWkjeS4jeiDveS4uuepuiIgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIC8v6Kej5p6Q6KGo5oOFCiAgICAgIHZhciByZWcgPSAvXFsuKz9cXS9nOwogICAgICB0aGlzLmNvbW1lbnRDb250ZW50ID0gdGhpcy5jb21tZW50Q29udGVudC5yZXBsYWNlKHJlZywgZnVuY3Rpb24oc3RyKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICI8aW1nIHNyYz0gJyIgKwogICAgICAgICAgRW1vamlMaXN0W3N0cl0gKwogICAgICAgICAgIicgd2lkdGg9JzIyJ2hlaWdodD0nMjAnIHN0eWxlPSdwYWRkaW5nOiAwIDFweCcvPiIKICAgICAgICApOwogICAgICB9KTsKICAgICAgY29uc3QgcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGg7CiAgICAgIGNvbnN0IGFyciA9IHBhdGguc3BsaXQoIi8iKTsKICAgICAgdmFyIGNvbW1lbnQgPSB7CiAgICAgICAgYXJ0aWNsZUlkOiBhcnJbMl0sCiAgICAgICAgcmVwbHlVc2VySWQ6IHRoaXMucmVwbHlVc2VySWQsCiAgICAgICAgcGFyZW50SWQ6IHRoaXMucGFyZW50SWQsCiAgICAgICAgY29tbWVudENvbnRlbnQ6IHRoaXMuY29tbWVudENvbnRlbnQKICAgICAgfTsKICAgICAgdGhpcy5jb21tZW50Q29udGVudCA9ICIiOwogICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvY29tbWVudHMiLCBjb21tZW50KS50aGVuKCh7IGRhdGEgfSkgPT4gewogICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgIHRoaXMuJGVtaXQoInJlbG9hZFJlcGx5IiwgdGhpcy5pbmRleCk7CiAgICAgICAgICBjb25zdCBpc1JldmlldyA9IHRoaXMuJHN0b3JlLnN0YXRlLmJsb2dJbmZvLndlYnNpdGVDb25maWcKICAgICAgICAgICAgICAgICAgLmlzQ29tbWVudFJldmlldzsKICAgICAgICAgIGlmIChpc1JldmlldykgewogICAgICAgICAgICB0aGlzLiR0b2FzdCh7IHR5cGU6ICJ3YXJubmluZyIsIG1lc3NhZ2U6ICLlm57lpI3miJDlip8s6K+3562J5b6F5a6h5qC477yBIiB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHRvYXN0KHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi5Zue5aSN5oiQ5Yqf77yBIiB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdG9hc3QoeyB0eXBlOiAiZXJyb3IiLCBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhZGRFbW9qaSh0ZXh0KSB7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgKz0gdGV4dDsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Reply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reply.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"reply-input-wrapper\" style=\"display: none\" ref=\"reply\">\n    <textarea\n      class=\"comment-textarea\"\n      :placeholder=\"'回复 @' + nickname + '：'\"\n      auto-grow\n      dense\n      v-model=\"commentContent\"\n    />\n    <div class=\"emoji-container\">\n      <span\n        :class=\"chooseEmoji ? 'emoji-btn-active' : 'emoji-btn'\"\n        @click=\"chooseEmoji = !chooseEmoji\"\n      >\n        <i class=\"iconfont iconbiaoqing\" />\n      </span>\n      <div style=\"margin-left:auto\">\n        <button @click=\"cancleReply\" class=\"cancle-btn v-comment-btn\">\n          取消\n        </button>\n        <button @click=\"insertReply\" class=\"upload-btn v-comment-btn\">\n          提交\n        </button>\n      </div>\n    </div>\n    <!-- 表情框 -->\n    <emoji @addEmoji=\"addEmoji\" :chooseEmoji=\"chooseEmoji\"></emoji>\n  </div>\n</template>\n\n<script>\nimport Emoji from \"./Emoji\";\nimport EmojiList from \"../assets/js/emoji\";\nexport default {\n  components: {\n    Emoji\n  },\n  data: function() {\n    return {\n      index: 0,\n      chooseEmoji: false,\n      nickname: \"\",\n      replyUserId: null,\n      parentId: null,\n      commentContent: \"\"\n    };\n  },\n  methods: {\n    cancleReply() {\n      this.$refs.reply.style.display = \"none\";\n    },\n    insertReply() {\n      //判断登录\n      if (!this.$store.state.userId) {\n        this.$store.state.loginFlag = true;\n        return false;\n      }\n      if (this.commentContent.trim() === \"\") {\n        this.$toast({ type: \"error\", message: \"回复不能为空\" });\n        return false;\n      }\n      //解析表情\n      var reg = /\\[.+?\\]/g;\n      this.commentContent = this.commentContent.replace(reg, function(str) {\n        return (\n          \"<img src= '\" +\n          EmojiList[str] +\n          \"' width='22'height='20' style='padding: 0 1px'/>\"\n        );\n      });\n      const path = this.$route.path;\n      const arr = path.split(\"/\");\n      var comment = {\n        articleId: arr[2],\n        replyUserId: this.replyUserId,\n        parentId: this.parentId,\n        commentContent: this.commentContent\n      };\n      this.commentContent = \"\";\n      this.axios.post(\"/api/comments\", comment).then(({ data }) => {\n        if (data.flag) {\n          this.$emit(\"reloadReply\", this.index);\n          const isReview = this.$store.state.blogInfo.websiteConfig\n                  .isCommentReview;\n          if (isReview) {\n            this.$toast({ type: \"warnning\", message: \"回复成功,请等待审核！\" });\n          } else {\n            this.$toast({ type: \"success\", message: \"回复成功！\" });\n          }\n        } else {\n          this.$toast({ type: \"error\", message: data.message });\n        }\n      });\n    },\n    addEmoji(text) {\n      this.commentContent += text;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.reply-input-wrapper {\n  border: 1px solid #90939950;\n  border-radius: 4px;\n  padding: 10px;\n  margin: 0 0 10px;\n}\n</style>\n"]}]}