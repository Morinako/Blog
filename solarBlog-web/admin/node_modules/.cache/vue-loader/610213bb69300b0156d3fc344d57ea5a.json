{"remainingRequest":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\admin\\src\\views\\role\\Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\admin\\src\\views\\role\\Role.vue","mtime":1692914156000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\solarBlog-master\\solarBlog-master\\solarBlog-web\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHsKICAgIGRlbGV0ZVJvbGVzLAogICAgZ2V0Um9sZUxpc3QsCiAgICBnZXRSb2xlTWVudXMsCiAgICBnZXRSb2xlUmVzb3VyY2UsCiAgICBzYXZlT3JVcGRhdGVSb2xlTWVudSwKICAgIHNhdmVPclVwZGF0ZVJvbGVSZXNvdXJjZQogIH0gZnJvbSAiLi4vLi4vYXBpL3VzZXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxpc3RSb2xlcygpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBpc0RlbGV0ZTogZmFsc2UsCiAgICAgIHJvbGVMaXN0OiBbXSwKICAgICAgcm9sZUlkTGlzdDogW10sCiAgICAgIGtleXdvcmRzOiBudWxsLAogICAgICBjdXJyZW50OiAxLAogICAgICBzaXplOiAxMCwKICAgICAgY291bnQ6IDAsCiAgICAgIHJvbGVNZW51OiBmYWxzZSwKICAgICAgcm9sZVJlc291cmNlOiBmYWxzZSwKICAgICAgcmVzb3VyY2VMaXN0OiBbXSwKICAgICAgbWVudUxpc3Q6IFtdLAogICAgICByb2xlRm9ybTogewogICAgICAgIHJvbGVOYW1lOiAiIiwKICAgICAgICByb2xlTGFiZWw6ICIiLAogICAgICAgIHJlc291cmNlSWRMaXN0OiBbXSwKICAgICAgICBtZW51SWRMaXN0OiBbXQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2hhbmdlRGlzYWJsZShyb3cpIHsKICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgbWVzc2FnZTogIuemgeatouaTjeS9nCIKICAgICAgfSkKICAgICAgcm93LmlzRGlzYWJsZSA9IHJvdy5pc0Rpc2FibGUgPT09IDEgPyAwIDogMTsKICAgIH0sCiAgICBzZWFyY2hSb2xlcygpIHsKICAgICAgdGhpcy5jdXJyZW50ID0gMTsKICAgICAgdGhpcy5saXN0Um9sZXMoKTsKICAgIH0sCiAgICBzaXplQ2hhbmdlKHNpemUpIHsKICAgICAgdGhpcy5zaXplID0gc2l6ZTsKICAgICAgdGhpcy5saXN0Um9sZXMoKTsKICAgIH0sCiAgICBjdXJyZW50Q2hhbmdlKGN1cnJlbnQpIHsKICAgICAgdGhpcy5jdXJyZW50ID0gY3VycmVudDsKICAgICAgdGhpcy5saXN0Um9sZXMoKTsKICAgIH0sCiAgICBzZWxlY3Rpb25DaGFuZ2Uocm9sZUxpc3QpIHsKICAgICAgdGhpcy5yb2xlSWRMaXN0ID0gW107CiAgICAgIHJvbGVMaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgdGhpcy5yb2xlSWRMaXN0LnB1c2goaXRlbS5pZCk7CiAgICAgIH0pOwogICAgfSwKICAgIGxpc3RSb2xlcygpIHsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIGN1cnJlbnQ6IHRoaXMuY3VycmVudCwKICAgICAgICBzaXplOiB0aGlzLnNpemUsCiAgICAgICAga2V5d29yZHM6IHRoaXMua2V5d29yZHMKICAgICAgfTsKICAgICAgZ2V0Um9sZUxpc3QocGFyYW1zKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5yb2xlTGlzdCA9IHJlcy5kYXRhLmRhdGEucmVjb3JkTGlzdDsKICAgICAgICB0aGlzLmNvdW50ID0gcmVzLmRhdGEuZGF0YS5jb3VudDsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICAgIGdldFJvbGVSZXNvdXJjZSgpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnJlc291cmNlTGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIH0pOwogICAgICBnZXRSb2xlTWVudXMoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5tZW51TGlzdCA9IHJlcy5kYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVJvbGVzKGlkKSB7CiAgICAgIGxldCBwYXJhbSA9IHt9OwogICAgICBpZiAoaWQgPT0gbnVsbCkgewogICAgICAgIHBhcmFtID0geyBkYXRhOiB0aGlzLnJvbGVJZExpc3QgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJhbSA9IHsgZGF0YTogW2lkXSB9OwogICAgICB9CiAgICAgIGRlbGV0ZVJvbGVzKHBhcmFtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmZsYWcpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICLmiJDlip8iLAogICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMubGlzdFJvbGVzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAi5aSx6LSlIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLmRhdGEubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuaXNEZWxldGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgb3Blbk1lbnVNb2RlbChyb2xlKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuJHJlZnMubWVudVRyZWUuc2V0Q2hlY2tlZEtleXMoW10pOwogICAgICB9KTsKICAgICAgdGhpcy4kcmVmcy5yb2xlVGl0bGUuaW5uZXJIVE1MID0gcm9sZSA/ICLkv67mlLnop5LoibIiIDogIuaWsOWinuinkuiJsiI7CiAgICAgIGlmIChyb2xlICE9IG51bGwpIHsKICAgICAgICB0aGlzLnJvbGVGb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb2xlKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yb2xlRm9ybSA9IHsKICAgICAgICAgIHJvbGVOYW1lOiAiIiwKICAgICAgICAgIHJvbGVMYWJlbDogIiIsCiAgICAgICAgICByZXNvdXJjZUlkTGlzdDogW10sCiAgICAgICAgICBtZW51SWRMaXN0OiBbXQogICAgICAgIH07CiAgICAgIH0KICAgICAgdGhpcy5yb2xlTWVudSA9IHRydWU7CiAgICB9LAogICAgb3BlblJlc291cmNlTW9kZWwocm9sZSkgewogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLiRyZWZzLnJlc291cmNlVHJlZS5zZXRDaGVja2VkS2V5cyhbXSk7CiAgICAgIH0pOwogICAgICB0aGlzLnJvbGVGb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb2xlKSk7CiAgICAgIHRoaXMucm9sZVJlc291cmNlID0gdHJ1ZTsKICAgIH0sCiAgICBzYXZlT3JVcGRhdGVSb2xlUmVzb3VyY2UoKSB7CiAgICAgIHRoaXMucm9sZUZvcm0ubWVudUlkTGlzdCA9IG51bGw7CiAgICAgIHRoaXMucm9sZUZvcm0ucmVzb3VyY2VJZExpc3QgPSB0aGlzLiRyZWZzLnJlc291cmNlVHJlZS5nZXRDaGVja2VkS2V5cygpOwogICAgICBzYXZlT3JVcGRhdGVSb2xlUmVzb3VyY2UodGhpcy5yb2xlRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5mbGFnKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgIHRpdGxlOiAi5oiQ5YqfIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLmRhdGEubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmxpc3RSb2xlcygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5kYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLnJvbGVSZXNvdXJjZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlT3JVcGRhdGVSb2xlTWVudSgpIHsKICAgICAgaWYgKHRoaXMucm9sZUZvcm0ucm9sZU5hbWUudHJpbSgpID09PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuinkuiJsuWQjeS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5yb2xlRm9ybS5yb2xlTGFiZWwudHJpbSgpID09PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuadg+mZkOagh+etvuS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLnJvbGVGb3JtLnJlc291cmNlSWRMaXN0ID0gbnVsbDsKICAgICAgdGhpcy5yb2xlRm9ybS5tZW51SWRMaXN0ID0gdGhpcy4kcmVmcy5tZW51VHJlZQogICAgICAgIC5nZXRDaGVja2VkS2V5cygpCiAgICAgICAgLmNvbmNhdCh0aGlzLiRyZWZzLm1lbnVUcmVlLmdldEhhbGZDaGVja2VkS2V5cygpKTsKICAgICAgc2F2ZU9yVXBkYXRlUm9sZU1lbnUodGhpcy5yb2xlRm9ybSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZGF0YS5mbGFnKSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgIHRpdGxlOiAi5oiQ5YqfIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLmRhdGEubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmxpc3RSb2xlcygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5kYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLnJvbGVNZW51ID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Role.vue","sourceRoot":"src/views/role","sourcesContent":["<template>\n  <el-card class=\"main-card\">\n    <div class=\"title\">{{ this.$route.name }}</div>\n    <!-- 表格操作 -->\n    <div class=\"operation-container\">\n      <el-button\n        type=\"primary\"\n        size=\"small\"\n        icon=\"el-icon-plus\"\n        @click=\"openMenuModel(null)\"\n      >\n        新增\n      </el-button>\n      <el-button\n        type=\"danger\"\n        size=\"small\"\n        icon=\"el-icon-delete\"\n        :disabled=\"this.roleIdList.length == 0\"\n        @click=\"isDelete = true\"\n      >\n        批量删除\n      </el-button>\n      <!-- 条件筛选 -->\n      <div style=\"margin-left:auto\">\n        <el-input\n          v-model=\"keywords\"\n          prefix-icon=\"el-icon-search\"\n          size=\"small\"\n          placeholder=\"请输入角色名\"\n          style=\"width:200px\"\n          @keyup.enter.native=\"searchRoles\"\n        />\n        <el-button\n          type=\"primary\"\n          size=\"small\"\n          icon=\"el-icon-search\"\n          style=\"margin-left:1rem\"\n          @click=\"searchRoles\"\n        >\n          搜索\n        </el-button>\n      </div>\n    </div>\n    <!-- 表格展示 -->\n    <el-table\n      border\n      :data=\"roleList\"\n      @selection-change=\"selectionChange\"\n      v-loading=\"loading\"\n    >\n      <!-- 表格列 -->\n      <el-table-column type=\"selection\" width=\"55\" />\n      <el-table-column prop=\"roleName\" label=\"角色名\" align=\"center\" />\n      <el-table-column prop=\"roleLabel\" label=\"权限标签\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag>\n            {{ scope.row.roleLabel }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"isDisable\" label=\"禁用\" align=\"center\" width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.isDisable\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#F4F4F5\"\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n            @change=\"changeDisable(scope.row)\"\n          />\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"createTime\"\n        label=\"创建时间\"\n        width=\"150\"\n        align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <i class=\"el-icon-time\" style=\"margin-right:5px\" />\n          {{ scope.row.createTime | date }}\n        </template>\n      </el-table-column>\n      <!-- 列操作 -->\n      <el-table-column label=\"操作\" align=\"center\" width=\"220\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"mini\" @click=\"openMenuModel(scope.row)\">\n            <i class=\"el-icon-edit\" /> 菜单权限\n          </el-button>\n          <el-button\n            type=\"text\"\n            size=\"mini\"\n            @click=\"openResourceModel(scope.row)\"\n          >\n            <i class=\"el-icon-folder-checked\" /> 资源权限\n          </el-button>\n          <el-popconfirm\n            title=\"确定删除吗？\"\n            style=\"margin-left:10px\"\n            @confirm=\"deleteRoles(scope.row.id)\"\n          >\n            <el-button size=\"mini\" type=\"text\" slot=\"reference\">\n              <i class=\"el-icon-delete\" /> 删除\n            </el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 分页 -->\n    <el-pagination\n      class=\"pagination-container\"\n      background\n      @size-change=\"sizeChange\"\n      @current-change=\"currentChange\"\n      :current-page=\"current\"\n      :page-size=\"size\"\n      :total=\"count\"\n      :page-sizes=\"[10, 20]\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n    />\n    <!-- 菜单对话框 -->\n    <el-dialog :visible.sync=\"roleMenu\" width=\"30%\" :close-on-click-modal=\"false\">\n      <div class=\"dialog-title-container\" slot=\"title\" ref=\"roleTitle\" />\n      <el-form label-width=\"80px\" size=\"medium\" :model=\"roleForm\">\n        <el-form-item label=\"角色名\">\n          <el-input v-model=\"roleForm.roleName\" style=\"width:250px\" />\n        </el-form-item>\n        <el-form-item label=\"权限标签\">\n          <el-input v-model=\"roleForm.roleLabel\" style=\"width:250px\" />\n        </el-form-item>\n        <el-form-item label=\"菜单权限\">\n          <el-tree\n            :data=\"menuList\"\n            :default-checked-keys=\"roleForm.menuIdList\"\n            check-strictly\n            show-checkbox\n            node-key=\"id\"\n            ref=\"menuTree\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"roleMenu = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"saveOrUpdateRoleMenu\">\n          确 定\n        </el-button>\n      </div>\n    </el-dialog>\n    <!-- 资源对话框 -->\n    <el-dialog :visible.sync=\"roleResource\" width=\"30%\" top=\"9vh\" :close-on-click-modal=\"false\">\n      <div class=\"dialog-title-container\" slot=\"title\">修改资源权限</div>\n      <el-form label-width=\"80px\" size=\"medium\" :model=\"roleForm\">\n        <el-form-item label=\"角色名\">\n          <el-input v-model=\"roleForm.roleName\" style=\"width:250px\" />\n        </el-form-item>\n        <el-form-item label=\"权限标签\">\n          <el-input v-model=\"roleForm.roleLabel\" style=\"width:250px\" />\n        </el-form-item>\n        <el-form-item label=\"资源权限\">\n          <el-tree\n            :data=\"resourceList\"\n            :default-checked-keys=\"roleForm.resourceIdList\"\n            show-checkbox\n            node-key=\"id\"\n            ref=\"resourceTree\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"roleResource = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"saveOrUpdateRoleResource\">\n          确 定\n        </el-button>\n      </div>\n    </el-dialog>\n    <!-- 批量删除对话框 -->\n    <el-dialog :visible.sync=\"isDelete\" width=\"30%\" :close-on-click-modal=\"false\">\n      <div class=\"dialog-title-container\" slot=\"title\">\n        <i class=\"el-icon-warning\" style=\"color:#ff9900\" />提示\n      </div>\n      <div style=\"font-size:1rem\">是否删除选中项？</div>\n      <div slot=\"footer\">\n        <el-button @click=\"isDelete = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"deleteRoles(null)\">\n          确 定\n        </el-button>\n      </div>\n    </el-dialog>\n  </el-card>\n</template>\n\n<script>\n  import {\n    deleteRoles,\n    getRoleList,\n    getRoleMenus,\n    getRoleResource,\n    saveOrUpdateRoleMenu,\n    saveOrUpdateRoleResource\n  } from \"../../api/user\";\n\nexport default {\n  created() {\n    this.listRoles();\n  },\n  data: function() {\n    return {\n      loading: true,\n      isDelete: false,\n      roleList: [],\n      roleIdList: [],\n      keywords: null,\n      current: 1,\n      size: 10,\n      count: 0,\n      roleMenu: false,\n      roleResource: false,\n      resourceList: [],\n      menuList: [],\n      roleForm: {\n        roleName: \"\",\n        roleLabel: \"\",\n        resourceIdList: [],\n        menuIdList: []\n      }\n    };\n  },\n  methods: {\n    changeDisable(row) {\n      this.$notify.error({\n        title: \"失败\",\n        message: \"禁止操作\"\n      })\n      row.isDisable = row.isDisable === 1 ? 0 : 1;\n    },\n    searchRoles() {\n      this.current = 1;\n      this.listRoles();\n    },\n    sizeChange(size) {\n      this.size = size;\n      this.listRoles();\n    },\n    currentChange(current) {\n      this.current = current;\n      this.listRoles();\n    },\n    selectionChange(roleList) {\n      this.roleIdList = [];\n      roleList.forEach(item => {\n        this.roleIdList.push(item.id);\n      });\n    },\n    listRoles() {\n      const params = {\n        current: this.current,\n        size: this.size,\n        keywords: this.keywords\n      };\n      getRoleList(params).then(res => {\n        this.roleList = res.data.data.recordList;\n        this.count = res.data.data.count;\n        this.loading = false;\n      });\n      getRoleResource().then(res => {\n        this.resourceList = res.data.data;\n      });\n      getRoleMenus().then(res => {\n        this.menuList = res.data.data;\n      });\n    },\n    deleteRoles(id) {\n      let param = {};\n      if (id == null) {\n        param = { data: this.roleIdList };\n      } else {\n        param = { data: [id] };\n      }\n      deleteRoles(param).then(res => {\n        if (res.data.flag) {\n          this.$notify.success({\n            title: \"成功\",\n            message: res.data.message\n          });\n          this.listRoles();\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: res.data.message\n          });\n        }\n        this.isDelete = false;\n      });\n    },\n    openMenuModel(role) {\n      this.$nextTick(function() {\n        this.$refs.menuTree.setCheckedKeys([]);\n      });\n      this.$refs.roleTitle.innerHTML = role ? \"修改角色\" : \"新增角色\";\n      if (role != null) {\n        this.roleForm = JSON.parse(JSON.stringify(role));\n      } else {\n        this.roleForm = {\n          roleName: \"\",\n          roleLabel: \"\",\n          resourceIdList: [],\n          menuIdList: []\n        };\n      }\n      this.roleMenu = true;\n    },\n    openResourceModel(role) {\n      this.$nextTick(function() {\n        this.$refs.resourceTree.setCheckedKeys([]);\n      });\n      this.roleForm = JSON.parse(JSON.stringify(role));\n      this.roleResource = true;\n    },\n    saveOrUpdateRoleResource() {\n      this.roleForm.menuIdList = null;\n      this.roleForm.resourceIdList = this.$refs.resourceTree.getCheckedKeys();\n      saveOrUpdateRoleResource(this.roleForm).then(res => {\n        if (res.data.flag) {\n          this.$notify.success({\n            title: \"成功\",\n            message: res.data.message\n          });\n          this.listRoles();\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: res.data.message\n          });\n        }\n        this.roleResource = false;\n      });\n    },\n    saveOrUpdateRoleMenu() {\n      if (this.roleForm.roleName.trim() === \"\") {\n        this.$message.error(\"角色名不能为空\");\n        return false;\n      }\n      if (this.roleForm.roleLabel.trim() === \"\") {\n        this.$message.error(\"权限标签不能为空\");\n        return false;\n      }\n      this.roleForm.resourceIdList = null;\n      this.roleForm.menuIdList = this.$refs.menuTree\n        .getCheckedKeys()\n        .concat(this.$refs.menuTree.getHalfCheckedKeys());\n      saveOrUpdateRoleMenu(this.roleForm).then(res => {\n        if (res.data.flag) {\n          this.$notify.success({\n            title: \"成功\",\n            message: res.data.message\n          });\n          this.listRoles();\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: res.data.message\n          });\n        }\n        this.roleMenu = false;\n      });\n    }\n  }\n};\n</script>\n"]}]}